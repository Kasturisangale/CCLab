ic_paren.l  
%{  
#include "ic_paren.tab.h"  
#include <stdio.h>  
#include <stdlib.h>  
%}  
%%  
[0-9]+ { yylval.ival = atoi(yytext); return NUM; }  
[\n] { return '\n'; }  
[\t ]+ ; // ignore whitespace  
. { return yytext[0]; }   
%%  
int yywrap() { return 1; }   
ic_paren.y  
%{  
#include <stdio.h>  
#include <stdlib.h>  
#include <string.h>  
int tempCount = 1;  
char tempVar[10];  
void newTemp() {  
sprintf(tempVar, "t%d", tempCount++);  
}  
int yylex(void);  
int yyerror(const char *msg);  
%}  
%union {  
int ival; // for numbers  
char *sval; // for intermediate variable names  
}  
%token <ival> NUM  
%type <sval> E  
%left '+' '-' 
 
 
%left '*' '/'  
%left '(' ')' // precedence for parentheses  
%%  
S : E '\n' { printf("Intermediate Code Generation 
Done!\n"); }  ;  
E : E '+' E { newTemp(); printf("%s = %s + %s\n", tempVar, $1, $3); $$ 
=  strdup(tempVar); free($1); free($3); }  
| E '-' E { newTemp(); printf("%s = %s - %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| E '*' E { newTemp(); printf("%s = %s * %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| E '/' E { newTemp(); printf("%s = %s / %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| '(' E ')' { $$ = $2; } // parentheses  
| NUM { char buff[20]; sprintf(buff, "%d", $1); $$ = strdup(buff); }  
;  
%%  
int main() {  
printf("Enter an arithmetic expression with 
parentheses:\n");  yyparse();  
return 0;  
}  
int yyerror(const char *msg) {  
printf("Error: %s\n", msg);  
return 0;  
}  
