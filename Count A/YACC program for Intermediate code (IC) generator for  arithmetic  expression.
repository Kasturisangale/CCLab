ic_arith.l  
%{  
#include "ic_arith.tab.h"  
#include <stdio.h>  
#include <stdlib.h>  
%}  
%%  
[0-9]+ { yylval.ival = atoi(yytext); return NUM; }  
[\n] { return '\n'; }  
[\t ]+ ; // ignore whitespace  
. { return yytext[0]; }  
%%  
int yywrap() {  
 return 1;   
} 
 
 
ic_arith.y  
%{  
#include <stdio.h>  
#include <stdlib.h>  
#include <string.h>  
int tempCount = 1;  
char tempVar[10];  
void newTemp() {  
sprintf(tempVar, "t%d", tempCount++);  
}  
%}  
%union {  
int ival;   
char *sval;   
}  
%token <ival> NUM  
%type <sval> E  
%left '+' '-'  
%left '*' '/'  
%%  
S : E '\n' { printf("Intermediate Code Generation Done!\n"); 
}  ;  
E : E '+' E { newTemp(); printf("%s = %s + %s\n", tempVar, $1, $3); $$ 
=  strdup(tempVar); free($1); free($3); }  
| E '-' E { newTemp(); printf("%s = %s - %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| E '*' E { newTemp(); printf("%s = %s * %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| E '/' E { newTemp(); printf("%s = %s / %s\n", tempVar, $1, $3); $$ =  
strdup(tempVar); free($1); free($3); }  
| NUM { char buff[20]; sprintf(buff, "%d", $1); $$ = strdup(buff); }  
;  
%%  
int main() {  
printf("Enter an arithmetic expression:\n");  
yyparse();  
return 0;  
}  
int yyerror(char *msg) { 
 
 
printf("Error: %s\n", msg);  
return 0;  
} 
